From df67f9fa34ccde8bef81c194f4bc8cde086272a3 Mon Sep 17 00:00:00 2001
From: Wolfgang Grandegger <wg@aries-embedded.de>
Date: Sat, 30 Oct 2021 20:11:16 +0200
Subject: [PATCH 1/3] gpio: microsemi: enumerate GPIOs starting from 0

Signed-off-by: Wolfgang Grandegger <wg@aries-embedded.de>
---
 drivers/gpio/gpio-microsemi.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/gpio/gpio-microsemi.c b/drivers/gpio/gpio-microsemi.c
index 24bb9a88c3d6..fcf91d6c0ee7 100644
--- a/drivers/gpio/gpio-microsemi.c
+++ b/drivers/gpio/gpio-microsemi.c
@@ -426,7 +426,8 @@ static int microsemi_mss_gpio_probe(struct platform_device *pdev)
 	mss_gpio->gc.get_direction = microsemi_mss_gpio_get_direction;
 	mss_gpio->gc.get = microsemi_mss_gpio_get_value;
 	mss_gpio->gc.set = microsemi_mss_gpio_set_value;
-	mss_gpio->gc.base = 0;
+	mss_gpio->gc.base = (pdev->id < 0) ?
+			of_alias_get_id(node, "gpio") * 32 : pdev->id * 32;
 	mss_gpio->gc.ngpio = ngpio;
 	mss_gpio->gc.label = dev_name(dev);
 	mss_gpio->gc.parent = dev;
-- 
2.28.0

